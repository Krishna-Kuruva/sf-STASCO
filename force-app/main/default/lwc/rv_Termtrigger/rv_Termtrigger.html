<!--
 ----------------- Created by Dhriti.GhoshMoulick on 8/9/2021.
 -->

<!-- Rv Termtrigger -->
<template>

    <div class="slds-section" style="justify-content: space-between;display: flex;flex-direction: row;
    background-color: #f2f5f9;padding: 8px 5px;border-radius: 10px;">
        <h3 class="slds-section__title slds-theme_shade" style="font-size: 18px;font-weight: 600;color: #000000;">
            <span class="slds-truncate slds-p-horizontal_small" title="Section Title">Offer & Deal Creation </span>

        </h3>

        <div style="display: flex;align-items: center;">
            <h3 style="text-align: right;margin-right: 30px;"><a onclick={handleToggleChange} style="padding: 1px 10px;
            color: #ffffff;font-size: 14px;background: #212946;border-radius: 10px;">{sectionLabel}</a></h3>
        </div>
    </div>


    <!--<template if:true={show}>-->
    <div data-id="tabset" class="setTabset slds-hide">


        <lightning-tabset variant="scoped" active-tab-value={activeTab}>
            <lightning-tab label="Price & Market View" value="TSFP_PM" onactive={loadPMDeals}>
               <!--Surbhi-Start-PBI-1539864-->
			   <lightning-layout padding="around-small">
			   <!--Surbhi-End-PBI-1539864-->
                    <div class="slds-size_12-of-12">

                        <p class="tableCaption"><b>{customerName}</b></p>
                        <c-rv_price-market oncustomervaluechange={handleCustomerName}></c-rv_price-market>

                    </div>
                </lightning-layout>
            </lightning-tab>
            <lightning-tab label="Deal Entry View" value="TSFP_DE" onactive={loadDeals}>
                <lightning-layout>
                    <div class="slds-size_12-of-12">
                        <p class="tableCaption"><b>{customerName}</b></p>
                        <c-rv_dealentryview onpass={loadDeals}></c-rv_dealentryview>
                    </div>
                </lightning-layout>
            </lightning-tab>

            <lightning-tab label="Trigger" value="TTTT">
                <!--<div class="offerdeal-box">
        <lightning-button  label="Price & market view" name="priceMarketView" title="Price&MarketView" onclick={handleTab} class="slds-m-left_x-small"></lightning-button>
        <lightning-button  label="Deal entry view" name="DealEntryView" title="DealEntryView" onclick={handleTab} class="slds-m-left_x-small"> </lightning-button>
        <lightning-button  label="Trigger" title="trigger" name="termTrigger" onclick={handleTab} class="slds-m-left_x-small"> </lightning-button>
    </div>
    <template if:true = {termTriggerTab}>-->
                <!--Surbhi-Start-PBI-1539864-->
                <lightning-layout padding="around-small">
                    <div class="slds-size_12-of-12">
                        <p class="tableCaptionBottom"><b>{customerName}</b></p>
                    </div>
                </lightning-layout>
    <!--**************************************************************************************************-->
                <template if:false={filteredMasterTriggerData1.length}>
                    <div>
                        <p style="font-weight:bold;color:Red;">{triggerDealEntrySHTDataAvailability}</p>
                    </div>
                </template>
                <div class="c-container" data-id="triggerComponent">
                    <template if:true={renderCreateDealMasterTable}>
                        <lightning-layout-item padding="around-small" size="12">
                        <div class="row">
                            <div class="slds-grid tableFixHead scrollbarEdit">
                                <table class="slds-table slds-table_bordered slds-table_cell-buffer">
                                    <thead>
                                        <tr class="slds-text-title_caps slds-line-height_reset">

                                            <th class="putborderLeft putborderHeader  slds-color__background_gray-5"
                                                scope="col">
                                                <div class="slds-truncate">PLANT NAME</div>
                                            </th>
                                            <th class="putborderHeader slds-cell-wrap  slds-color__background_gray-5"
                                                scope="col">
                                                <div class="slds-truncate">PLANT CODE</div>
                                            </th>
                                            <th class="putborderHeader slds-cell-wrap  slds-color__background_gray-5"
                                                scope="col">
                                                <div class="slds-truncate">GRADE</div>
                                            </th>
                                            <th class="putborderHeader slds-cell-wrap  slds-color__background_gray-5"
                                                scope="col">
                                                <div class="slds-truncate"> MAT NO</div>
                                            </th>
                                            <th class="putborderHeader slds-cell-wrap  slds-color__background_gray-5"
                                                scope="col">
                                                MONTHLY VOLUME (CBM)
                                            </th>
                                            <th class="putborderHeader slds-cell-wrap  slds-color__background_gray-5"
                                                scope="col">
                                                REMAINING VOLUME (CBM)
                                            </th>
                                            <th class="putborderHeader slds-cell-wrap  slds-color__background_gray-5"
                                                scope="col">
                                                MIN. TRIGGER VOLUME (CBM)
                                            </th>
                                            <th class="putborderHeader slds-cell-wrap slds-color__background_gray-5"
                                                scope="col">
                                                MAX. TRIGGER VOLUME (CBM)
                                            </th>
                                            <th class="putborderHeader slds-cell-wrap slds-color__background_gray-5"
                                                scope="col">
                                                MAX. NO. OF TRIGGERS
                                            </th>
                                            <th class="putborderHeader slds-cell-wrap slds-color__background_gray-5"
                                                scope="col">
                                                TRIGGERS LEFT
                                            </th>
                                            <th class="putborderHeader slds-cell-wrap slds-color__background_gray-5"
                                                scope="col">
                                                TRIGGER (CBM)
                                            </th>
                                            <th class="putborderHeader slds-cell-wrap slds-color__background_gray-5"
                                                scope="col">
                                                COMMENT
                                            </th>

                                        </tr>
                                    </thead>

                                    <template for:each={filteredMasterTriggerData1} for:item="mrc" for:index="indx">
                                        <template if:true={mrc.mrcNo} >
                                            <tr key={mrc.mrcNo} data-mrc= {mrc.mrcNo}>
                                                <td data-label="PlantName" key={mrc.mrcNo}
                                                    style="background-color: lightgrey;font-weight:900;">
                                                    {mrc.mrcNo}</td>
                                            </tr>
                                        </template>

                                        <tr  key={mrc.mrcNums} class="slds-hint-parent">
                                            <td data-label="mrcNum"  style="background-color: var(--lwc-paletteYellow90);font-weight:bold;">{mrc.mrcNums}</td>
                                        </tr>

                                        <template for:each={mrc.plants} for:item="cmPlant" for:index="pIndex">
                                            <tbody class={cmPlant.rowbgColor} data-plant={cmPlant.location} key={cmPlant.location}>
                                                <!--tr  key={cmPlant.location} class="slds-hint-parent">
                                                    <td data-label="mrcNum"  style="background-color: var(--lwc-paletteYellow90);font-weight:bold;">{cmPlant.mrcNum}-{cmPlant.mrcContract_Description}</td>
                                                </tr-->
                                                <tr >
                                                    <!--td data-label="mrcNum" rowspan={cmPlant.rowspan}>{cmPlant.mrcNum}-{cmPlant.mrcLineItem}</td-->
                                                    <td data-label="PlantName" rowspan={cmPlant.rowspan}>{cmPlant.location}</td>
                                                    <td data-label="PlantId" rowspan={cmPlant.rowspan}>{cmPlant.locationCode}</td>

                                                </tr>
                                                <template for:each={cmPlant.gradeGroup} for:item="cmPlantGrade"
                                                            for:index="gIndex">

                                                            <tr data-grade={cmPlantGrade.MRC_Number_Plant_Name} key={cmPlantGrade}>
                                                                <td  data-label="Grade" style="font-weight: bold;">{cmPlantGrade.MRC_Number_Material_Description}  </td>
                                                                <td data-label = "MatNo">{cmPlantGrade.MRC_Number_Product_Name}</td>
                                                                <td data-label = "MatNo">{cmPlantGrade.Monthly_volume}</td>
                                                                <td data-label = "MatNo">{cmPlantGrade.Remaining_trigger_volume}</td>
                                                                <td data-label = "MatNo">{cmPlantGrade.Min_Trigger_Volume}</td>
                                                                <td data-label = "MatNo">{cmPlantGrade.Max_Trigger_Volume}</td>
                                                                <td data-label = "MatNo">{cmPlantGrade.Max_number_of_triggers_per_month}</td>
                                                                <td data-label = "MatNo">{cmPlantGrade.Remaining_triggers}</td>
                                                                <td data-label = "MatNo">
                                                                    <lightning-input type="number"  step=".01" data-plant= {pIndex}   data-mrc = {indx} data-id= {gIndex} value= {cmPlantGrade.TriggerVolume1}  onchange= {onchangeTriggerVolume1}>
                                                                    </lightning-input>
                                                                    <!--lightning-input type="number" step=".01" data-plant= {pIndex} data-id= {indx} value= {cmPlantGrade.TriggerVolume} onchange= {onchangeTriggerVolume}>
                                                                    </lightning-input-->
                                                                </td>

                                                                <td data-label = "MatNo">
                                                                    <lightning-textarea data-plant={pIndex} data-mrc = {indx} data-id= {gIndex}  value={cmPlantGrade.TriggerComment1}
                                                                        onchange={onchangeTriggerComment1}
                                                                        max-length="255">
                                                                    </lightning-textarea>
                                                                    <!--lightning-textarea data-plant= {pIndex} data-mrc = {indx} data-id= {gIndex} value={cmPlantGrade.Comment}  onchange={onchangeDealComment} max-length="255">
                                                                    </lightning-textarea-->
                                                                </td>
                                                            </tr>
                                                </template>
                                            </tbody>
                                        </template>
                                    </template>
                                    <tbody>

                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <template if:true={isLoading}>
                            <div class="slds-p-around_x-large">
                                <lightning-spinner alternative-text="Loading" class="slds-is-fixed" size="medium" variant="brand"></lightning-spinner>
                            </div>
                        </template><br/>

                    <!--lightning-layout>
                        <lightning-layout-item padding="around-small" size="8"></lightning-layout-item>
                        <lightning-layout-item padding="around-small" size="3"></lightning-layout-item>
                        <lightning-layout-item size="1">
                            <lightning-button variant="brand" label="Save" title="Save" onclick={saveTriggerDeal}  disabled={isDisabled}>
                            </lightning-button>

                        </lightning-layout-item>
                    </lightning-layout-->
                </lightning-layout-item>
                    <lightning-layout-item size="12"></lightning-layout-item>
                        <lightning-layout>
                            <lightning-layout-item padding="around-small" size="8"></lightning-layout-item>
                            <lightning-layout-item padding="around-small" size="3"></lightning-layout-item>
                            <lightning-layout-item size="1">
                                <lightning-button variant="brand" label="Save" title="Save" onclick={saveTriggerDeal}
                                    style="display: flex;justify-content: flex-end;margin-top:-10px"
                                    disabled={isDisabled}>
                                </lightning-button>

                            </lightning-layout-item>
                        </lightning-layout>
                </template>

    <!--**************************************************************************************************-->

                    <!--Surbhi-Start-PBI-1539864-->
                    <template if:true={savedMasterTriggerSHTData.length}>
                        <!--lightning-accordion-section name="B" label="My Saved Deal"-->
                        <!--Surbhi-End-PBI-1539864-->
                        <!--Surbhi-Start-PBI-1539864-->
                        <!--lightning-layout multiple-rows="true" horizontal-align="spread" class="cust_saveDealSectionHeight"-->
                        <lightning-layout-item padding="around-small" size="12">
                            <h3
                                style=" font-weight: 700;padding: 10px;color: black;background-color: rgb(246, 250, 213);border: 1px solid #b5b6b9;margin-top: 10px;margin-bottom:10px;border-radius:4px;">
                                Saved Deals</h3>
                        </lightning-layout-item>
                        <lightning-layout-item padding="around-small" size="12">
                        <!--Surbhi-End-PBI-1539864->
                        <lightning-layout-item padding="around-small" size="12"-->
							<div class="row">
							    <!--Surbhi-Start-PBI-1539864-->
                                <div class="slds-grid cust_savedDealTableCSS">

                                    <template if:true={savedMasterTriggerSHTData.length}>
                                        <!--Surbhi-End-PBI-1539864-->
                                        <table
                                            class="slds-table slds-table_bordered slds-table_cell-buffer slds-table_striped">
                                            <thead>
                                                <tr class="slds-text-title_caps">
                                                    <th class="putborderLeft putborderHeader  slds-color__background_gray-5"
                                                        scope="col">
                                                        MRC No
                                                    </th>
                                                    <th class="putborderHeader slds-cell-wrap  slds-color__background_gray-5"
                                                        scope="col">
                                                        Sold To
                                                    </th>
                                                    <th class="putborderHeader slds-cell-wrap  slds-color__background_gray-5"
                                                        scope="col">
                                                        Ship To
                                                    </th>
                                                    <th class="putborderHeader slds-cell-wrap  slds-color__background_gray-5"
                                                        scope="col">
                                                        PO Type
                                                    </th>
                                                    <th class="putborderHeader slds-cell-wrap  slds-color__background_gray-5"
                                                        scope="col">
                                                        Plant
                                                    </th>
                                                    <th class="putborderHeader slds-cell-wrap slds-color__background_gray-5"
                                                        scope="col">
                                                        Grade
                                                    </th>
                                                    <th class="putborderHeader slds-cell-wrap slds-color__background_gray-5"
                                                        scope="col">
                                                        Mat No
                                                    </th>
                                                    <th class="putborderHeader slds-cell-wrap slds-color__background_gray-5"
                                                        scope="col">
                                                        Contract Start Date
                                                    </th>
                                                    <th class="putborderHeader slds-cell-wrap slds-color__background_gray-5"
                                                        scope="col">
                                                        Contract End Date
                                                    </th>
                                                    <th class="putborderHeader slds-cell-wrap slds-color__background_gray-5"
                                                        scope="col">
                                                        Volume CBM
                                                    </th>

                                                    <th class="putborderHeader slds-cell-wrap slds-color__background_gray-5"
                                                        scope="col">
                                                        Comment
                                                    </th>
                                                    <th class="putborderHeader slds-cell-wrap slds-color__background_gray-5"
                                                        scope="col">
                                                        Action
                                                    </th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <template for:each={savedMasterTriggerSHTData} for:item="it"
                                                    for:index="indx">
                                                    <!--<template iterator:it={filteredMasterTriggerData}>-->
                                                    <tr class="slds-hint-parent" key={it.Id} id={it.Id}>
                                                        <td scope="row" class="putborderHeader putborderLeft"
                                                            data-label="MRC Name">
                                                            <div class="slds-cell-wrap">{it.MRC_Number__c}</div>
                                                        </td>
                                                        <td scope="row" class="putborderHeader" data-label="Plant Name">
                                                            <div class="slds-cell-wrap">{it.Sold_To_Name__c}</div>
                                                        </td>
                                                        <td scope="row" class="putborderHeader" data-label="Plant Code">
                                                            <div class="slds-cell-wrap">{it.Ship_To__c}</div>
                                                        </td>
                                                        <td scope="row" class="putborderHeader"
                                                            data-label="Material Description">
                                                            <div class="slds-cell-wrap">{it.PO_Type__c}</div>
                                                        </td>
                                                        <td scope="row" class="putborderHeader"
                                                            data-label="Monthly Volume">
                                                            <div class="slds-cell-wrap">{it.Location__r.Name}</div>
                                                        </td>
                                                        <td scope="row" class="putborderHeader"
                                                            data-label="Remaining Volume">
                                                            <div class="slds-cell-wrap">{it.Product_Category__c}</div>
                                                        </td>
                                                        <td scope="row" class="putborderHeader"
                                                            data-label="Min Trigger Volume">
                                                            <div class="slds-cell-wrap">{it.Material_No__c}</div>
                                                        </td>
                                                        <td scope="row" class="putborderHeader"
                                                            data-label="Max Trigger Volume">
                                                            <div class="slds-cell-wrap">{it.Contract_Start__c}</div>
                                                        </td>
                                                        <td scope="row" class="putborderHeader"
                                                            data-label="Max No of Trigger">
                                                            <div class="slds-cell-wrap">{it.Contract_End_Date__c}</div>
                                                        </td>
                                                        <td scope="row" class="putborderHeader"
                                                            data-label="TriggerVolume">
                                                            <div class="slds-cell-wrap">
                                                                <lightning-input data-id={indx} value={it.Volume_CBM__c}
                                                                    onchange={onchangeTriggerVolumeOnSave}>

                                                                </lightning-input>

                                                            </div>
                                                        </td>

                                                        <td scope="row" class="putborderHeader"
                                                            data-label="Max Trigger Volume">
                                                            <div class="slds-cell-wrap">
                                                                <lightning-textarea data-id={indx}
                                                                    value={it.Deal_Comment__c}
                                                                    onchange={onchangeTriggerCommentOnSave}>

                                                                </lightning-textarea>

                                                            </div>
                                                        </td>
                                                        <td scope="row" class="putborderHeader"
                                                            data-label="Max No of Trigger">
                                                            <div class="slds-cell-wrap">
                                                                <lightning-button data-recid={it.Id}
                                                                    variant="destructive" label="Cancel" title="Cancel"
                                                                    onclick={cancelTriggerDeal} disabled={isDisabled}>
                                                                </lightning-button>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                </template>
                                            </tbody>
                                        </table>
                                    </template>
                                    <template if:false={savedMasterTriggerSHTData}>
                                        <p>No Saved Deals.</p>
                                    </template>
                                </div>
                            </div>
                        </lightning-layout-item>
                            <!--Surbhi-Start-PBI-1539864-->
                            <!--div class="slds-m-around_large">
                            <div if:true={isConfirmLoading} class="slds-is-relative">
                                <lightning-spinner
                                    alternative-text="Loading..." variant="brand">
                                </lightning-spinner>
                            </div>
                        </div-->
                            <!--Surbhi-End-PBI-1539864->
                        </lightning-layout-item-->
                        <template if:false={saveDealsData}>
                            <lightning-layout-item padding="around-small" size="12">
                                <div class="slds-float_right slds-p-around_small">
                                    <p>No Saved Deals to Confirm</p>
                                </div>
                            </lightning-layout-item>
                        </template>

                        <template if:true={savesDealsData}>
                            <template if:true={savedMasterTriggerSHTData}>
							    <!--Surbhi-Start-PBI-1539864-->
                                <!--lightning-layout-item padding="around-small" size="12">

						   <div class="slds-float_right slds-p-around_small">

								<lightning-button variant="brand" label="Confirm" title="Confirm" onclick={confirmTriggerDeal}
                                disabled={isDisabled}>
                                </lightning-button>
                            </div>

                        </lightning-layout-item-->
                        <lightning-layout-item size="12"></lightning-layout-item>
                                <lightning-layout>
                                    <lightning-layout-item  size="11"></lightning-layout-item>
                                    <lightning-layout-item  size="1"><!--class="cust_confirmBtn"-->
                                        <!--lightning-button label="Confirm" name="Confirm" onclick={confirmTriggerDeal}
                                            variant="brand"  disabled={isDisabled}>
                                        </lightning-button-->
                                        <lightning-button variant="brand" label="Confirm" title="Confirm" onclick={confirmTriggerDeal}
                                    style="display: flex;justify-content: flex-end;margin-top:-10px"
                                    disabled={isDisabled}>
                                </lightning-button>
                                    </lightning-layout-item>
                                </lightning-layout>
                            </template>
                        </template>
                        <!--/lightning-layout-->
						<!--Surbhi-End-PBI-1539864-->
                        <!--Trigger contacts 25 and above-->
                        <lightning-layout>
                            <template if:true={renderSavedDealMasterTableFuture}>
                                <table class="slds-table slds-table_bordered slds-table_cell-buffer slds-table_striped">
                                    <thead>
                                        <tr class="slds-text-title_caps">
                                            <th class="putborderLeft putborderHeader  slds-color__background_gray-5"
                                                scope="col">
                                                MRC No
                                            </th>
                                            <th class="putborderHeader slds-cell-wrap  slds-color__background_gray-5"
                                                scope="col">
                                                Sold To
                                            </th>
                                            <th class="putborderHeader slds-cell-wrap  slds-color__background_gray-5"
                                                scope="col">
                                                Ship To
                                            </th>
                                            <th class="putborderHeader slds-cell-wrap  slds-color__background_gray-5"
                                                scope="col">
                                                PO Type
                                            </th>
                                            <th class="putborderHeader slds-cell-wrap  slds-color__background_gray-5"
                                                scope="col">
                                                Plant
                                            </th>
                                            <th class="putborderHeader slds-cell-wrap slds-color__background_gray-5"
                                                scope="col">
                                                Grade
                                            </th>
                                            <th class="putborderHeader slds-cell-wrap slds-color__background_gray-5"
                                                scope="col">
                                                Mat No
                                            </th>
                                            <th class="putborderHeader slds-cell-wrap slds-color__background_gray-5"
                                                scope="col">
                                                Contract Start Date
                                            </th>
                                            <th class="putborderHeader slds-cell-wrap slds-color__background_gray-5"
                                                scope="col">
                                                Contract End Date
                                            </th>
                                            <th class="putborderHeader slds-cell-wrap slds-color__background_gray-5"
                                                scope="col">
                                                Volume CBM
                                            </th>

                                            <th class="putborderHeader slds-cell-wrap slds-color__background_gray-5"
                                                scope="col">
                                                Comment
                                            </th>
                                            <th class="putborderHeader slds-cell-wrap slds-color__background_gray-5"
                                                scope="col">
                                                Action
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <template for:each={savedMasterTriggerSHTData} for:item="it" for:index="indx">
                                            <!--<template iterator:it={filteredMasterTriggerData}>-->
                                            <tr class="slds-hint-parent" key={it.Id} id={it.Id}>
                                                <td scope="row" class="putborderHeader putborderLeft"
                                                    data-label="MRC Name">
                                                    <div class="slds-cell-wrap">{it.MRC_Number__c}</div>
                                                </td>
                                                <td scope="row" class="putborderHeader" data-label="Plant Name">
                                                    <div class="slds-cell-wrap">{it.Sold_To_Name__c}</div>
                                                </td>
                                                <td scope="row" class="putborderHeader" data-label="Plant Code">
                                                    <div class="slds-cell-wrap">{it.Ship_To__c}</div>
                                                </td>
                                                <td scope="row" class="putborderHeader"
                                                    data-label="Material Description">
                                                    <div class="slds-cell-wrap">{it.PO_Type__c}</div>
                                                </td>
                                                <td scope="row" class="putborderHeader" data-label="Monthly Volume">
                                                    <div class="slds-cell-wrap">{it.Plant_No__c}</div>
                                                </td>
                                                <td scope="row" class="putborderHeader" data-label="Remaining Volume">
                                                    <div class="slds-cell-wrap">{it.Product_Category__c}</div>
                                                </td>
                                                <td scope="row" class="putborderHeader" data-label="Min Trigger Volume">
                                                    <div class="slds-cell-wrap">{it.Material_No__c}</div>
                                                </td>
                                                <td scope="row" class="putborderHeader" data-label="Max Trigger Volume">
                                                    <div class="slds-cell-wrap">{it.Contract_Start__c}</div>
                                                </td>
                                                <td scope="row" class="putborderHeader" data-label="Max No of Trigger">
                                                    <div class="slds-cell-wrap">{it.Contract_End_Date__c}</div>
                                                </td>
                                                <td scope="row" class="putborderHeader" data-label="TriggerVolume">
                                                    <div class="slds-cell-wrap">
                                                        <lightning-input data-id={indx} value={it.Volume_CBM__c}
                                                            onchange={onchangeTriggerVolumeOnSave}>

                                                        </lightning-input>

                                                    </div>
                                                </td>

                                                <td scope="row" class="putborderHeader" data-label="Max Trigger Volume">
                                                    <div class="slds-cell-wrap">
                                                        <lightning-textarea data-id={indx} value={it.Deal_Comment__c}
                                                            onchange={onchangeTriggerCommentOnSave}>

                                                        </lightning-textarea>

                                                    </div>
                                                </td>
                                                <td scope="row" class="putborderHeader" data-label="Max No of Trigger">
                                                    <div class="slds-cell-wrap">
                                                        <lightning-button data-recid={it.Id} variant="destructive"
                                                            label="Cancel" title="Cancel" onclick={cancelTriggerDeal}
                                                            disabled={isDisabled}>
                                                        </lightning-button>
                                                    </div>
                                                </td>
                                            </tr>
                                        </template>
                                    </tbody>
                                </table>
                            </template>
                        </lightning-layout>
                        <!--Trigger contacts 25 and above-->
                        <!--Surbhi-Start-PBI-1539864-->
                        <!--/lightning-accordion-section-->
                        <!--Surbhi-End-PBI-1539864-->
                    </template>
                    <div>
                        <!--Surbhi-Start-PBI-1539864-->
                        <lightning-layout-item size="12">
                            <!--<h3>Completed Deals</h3>-->
                            <h3
                                style=" font-weight: 700;padding: 10px;color: black;background-color: rgb(246, 250, 213);border: 1px solid #b5b6b9;margin-top: 10px;margin-bottom:10px;border-radius:4px;">
                                Completed Deals</h3>
                        </lightning-layout-item>
                        <!--Surbhi-End-PBI-1539864-->
                        <template if:true={renderCmpltdDealMasterTable}>
                            <!--Surbhi-Start-PBI-1539864-->
                            <!--lightning-accordion-section name="B" label="My Completed Deal"-->
                            <!--Surbhi-End-PBI-1539864-->
                            <!--Surbhi-Start-PBI-1539864-->
                            <lightning-layout-item>
                                <!--Surbhi-End-PBI-1539864-->
                                <c-rv_useadvancefilter></c-rv_useadvancefilter>
                                <!--Surbhi-Start-PBI-1539864-->
                            </lightning-layout-item>
                            <!--Surbhi-End-PBI-1539864-->
                            <!--<lightning-layout multiple-rows="true" horizontal-align="spread" >
                           <lightning-layout-item class="" size="2">
                            <lightning-input type="checkbox"
                                 label="Use Advanced Filter"
                                 name="useAdvancedFilter"
                                 value={useAdvancedFilter}
                                 onchange={handleChange}></lightning-input>
                        </lightning-layout-item>
                        <template if:false={sAdvanceFilter}>
                            <lightning-layout-item class="" size="1">
                                <legend class="slds-form-element__legend slds-form-element__label">Created On</legend>
                                <lightning-combobox variant="label-hidden"
                                     label="Created On"
                                     name="createdOn"
                                     value={createdOn}
                                     onchange={handleChange}
                                    options={createdOnOptions}></lightning-combobox>
                            </lightning-layout-item>
                            <lightning-layout-item class="" size="1"></lightning-layout-item>
                            <lightning-layout-item class="" size="1">
                                <legend class="slds-form-element__legend slds-form-element__label">Status</legend>
                                <lightning-combobox name="status"
                                                    label="Status"
                                                    variant="label-hidden"
                                                    value={advStatus}
                                                    placeholder="--Select--"
                                                    options={statusOptions}
                                                    onchange={handleChange}>
                                </lightning-combobox>
                            </lightning-layout-item>
                            <lightning-layout-item class="" size="7"></lightning-layout-item>
                        </template>
                        <template if:true={sAdvanceFilter}>
                            <lightning-layout-item class="" size="1">
                                <lightning-input type="checkbox"
                                     label="Internet Sales"
                                     name="internetSales"
                                     value={internetSales}
                                     onchange={handleChange}></lightning-input>
                            </lightning-layout-item>
                            <lightning-layout-item class="" size="1">

                                <lightning-input type="date"
                                                 name="startDate"
                                                 label="Start Date"
                                                 value={startDte}
                                                 date-style="short" onchange={handleChange}>
                                </lightning-input>
                            </lightning-layout-item>
                            <lightning-layout-item class="" size="1">
                                <lightning-input type="date"
                                     label="End Date"
                                     name="endDate"
                                     value={endDte} date-style="short"
                                     onchange={handleChange}></lightning-input>
                            </lightning-layout-item>

                            <lightning-layout-item class="" size="1">
                                <legend class="slds-form-element__legend slds-form-element__label">Created By</legend>
                                <lightning-combobox name="createdBy"
                                                    label="Created By"
                                                    variant="label-hidden"
                                                    value={advcreatedBy}
                                                    placeholder="--Select--"
                                                    options={createdByOptions}
                                                    onchange={handleChange}>
                                </lightning-combobox>
                            </lightning-layout-item>
                            <lightning-layout-item class="" size="1">
                                <legend class="slds-form-element__legend slds-form-element__label">Status</legend>
                                <lightning-combobox name="status"
                                                    label="Status"
                                                    variant="label-hidden"
                                                    value={advStatus}
                                                    placeholder="--Select--"
                                                    options={statusOptions}
                                                    onchange={handleChange}>
                                </lightning-combobox>
                            </lightning-layout-item>
                            <lightning-layout-item class="" size="1">
                                <legend class="slds-form-element__legend slds-form-element__label">Sold To</legend>
                                <lightning-combobox name="soldTo"
                                                    label="Sold To"
                                                    variant="label-hidden"
                                                    value={advSoldTo}
                                                    placeholder="--Select--"
                                                    options={soldToOptions}
                                                    onchange={handleChange}>
                                </lightning-combobox>

                            </lightning-layout-item>
                            <lightning-layout-item class="" size="1">
                                <legend class="slds-form-element__legend slds-form-element__label">SHT No</legend>
                                <lightning-combobox name="shtNo"
                                                    label="SHT No"
                                                    variant="label-hidden"
                                                    value={advShtNo}
                                                    placeholder="--Select--"
                                                    options={shtNoOptions}
                                                    onchange={handleChange}>
                                </lightning-combobox>

                            </lightning-layout-item>
                            <lightning-layout-item class="" size="1">
                                <legend class="slds-form-element__legend slds-form-element__label">PO Type</legend>
                                <lightning-combobox name="poType"
                                                    label="PO Type"
                                                    variant="label-hidden"
                                                    value={advpoType}
                                                    placeholder="--Select--"
                                                    options={poTypeOptions}
                                                    onchange={handleChange}>
                                </lightning-combobox>

                            </lightning-layout-item>
                        </template>
                    </lightning-layout>-->
                            <!--Surbhi-Start-PBI-1539864-->
                            <!--lightning-layout multiple-rows="true" horizontal-align="spread"-->
                            <!--Surbhi-End-PBI-1539864-->
                            <!--<lightning-layout-item padding="around-small" size="12">
                            <div class="row">
                                <div class="slds-grid " >
                                    <table class="slds-table slds-table_bordered slds-table_cell-buffer slds-table_striped">
                                        <thead>
                                        <tr class="slds-text-title_caps">
                                            <th class="putborderLeft putborderHeader  slds-color__background_gray-5" scope="col">
                                                SHT No
                                            </th>
                                            <th class="putborderLeft putborderHeader  slds-color__background_gray-5" scope="col">
                                                MRC No
                                            </th>
                                            <th class="putborderHeader slds-cell-wrap  slds-color__background_gray-5" scope="col">
                                                Sold To
                                            </th>
                                            <th class="putborderHeader slds-cell-wrap  slds-color__background_gray-5" scope="col">
                                                Ship To
                                            </th>
                                            <th class="putborderHeader slds-cell-wrap  slds-color__background_gray-5" scope="col">
                                                PO Type
                                            </th>
                                            <th class="putborderHeader slds-cell-wrap  slds-color__background_gray-5" scope="col">
                                                Plant
                                            </th>
                                            <th class="putborderHeader slds-cell-wrap slds-color__background_gray-5" scope="col">
                                                Grade
                                            </th>
                                            <th class="putborderHeader slds-cell-wrap slds-color__background_gray-5" scope="col">
                                                Mat No
                                            </th>
                                            <th class="putborderHeader slds-cell-wrap slds-color__background_gray-5" scope="col">
                                                Contract Start Date
                                            </th>
                                            <th class="putborderHeader slds-cell-wrap slds-color__background_gray-5" scope="col">
                                                Contract End Date
                                            </th>
                                            <th class="putborderHeader slds-cell-wrap slds-color__background_gray-5" scope="col">
                                                Volume CBM
                                            </th>

                                            <th class="putborderHeader slds-cell-wrap slds-color__background_gray-5" scope="col">
                                                Comment
                                            </th>
                                            <th class="putborderHeader slds-cell-wrap slds-color__background_gray-5" scope="col">
                                                Action
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <template if:true={confirmDealsData}>
                                            <lightning-layout-item padding="around-small" size="12">
                                                <div class="slds-float_right slds-p-around_small">
                                                    <p>No Configured Deals to Confirm</p>
                                                </div>
                                            </lightning-layout-item>
                                        </template>
                                        <template for:each={completedMasterTriggerSHTData} for:item="it" for:index="indx">  <!<template iterator:it={filteredMasterTriggerData}>>
                                            <tr class="slds-hint-parent" key = {it.Id} id={it.Id}>
                                                <td scope="row" class="putborderHeader putborderLeft" data-label="MRC Name">
                                                    <div class="slds-cell-wrap">{it.Name}</div>
                                                </td>
                                                <td scope="row" class="putborderHeader putborderLeft" data-label="MRC Name">
                                                    <div class="slds-cell-wrap">{it.MRC_Number__c}</div>
                                                </td>
                                                <td scope="row" class="putborderHeader" data-label="Plant Name">
                                                    <div class="slds-cell-wrap">{it.Sold_To_Name__c}</div>
                                                </td>
                                                <td scope="row" class="putborderHeader" data-label="Plant Code">
                                                    <div class="slds-cell-wrap">{it.Ship_To__c}</div>
                                                </td>
                                                <td  scope="row" class="putborderHeader" data-label="Material Description">
                                                    <div class="slds-cell-wrap">{it.PO_Type__c}</div>
                                                </td>
                                                <td scope="row" class="putborderHeader" data-label="Monthly Volume">
                                                    <div class="slds-cell-wrap">{it.Plant_No__c}</div>
                                                </td>
                                                <td scope="row" class="putborderHeader" data-label="Remaining Volume">
                                                    <div class="slds-cell-wrap">{it.Product_Category__c}</div>
                                                </td>
                                                <td scope="row" class="putborderHeader" data-label="Min Trigger Volume">
                                                    <div class="slds-cell-wrap">{it.Material_No__c}</div>
                                                </td>
                                                <td scope="row" class="putborderHeader" data-label="Max Trigger Volume">
                                                    <div class="slds-cell-wrap">{it.Contract_Start__c}</div>
                                                </td>
                                                <td scope="row" class="putborderHeader" data-label="Max No of Trigger">
                                                    <div class="slds-cell-wrap">{it.Contract_End_Date__c}</div>
                                                </td>
                                                <td scope="row" class="putborderHeader" data-label="TriggerVolume">
                                                    <div class="slds-cell-wrap">
                                                        <lightning-input data-id={indx} value={it.Volume_CBM__c} onchange={onchangeTriggerVolume}>

                                                        </lightning-input>

                                                    </div>
                                                </td>

                                                <td scope="row" class="putborderHeader" data-label="Max Trigger Volume">
                                                    <div class="slds-cell-wrap">{it.Deal_Comment__c}</div>
                                                </td>
                                                <td scope="row" class="putborderHeader" data-label="Max No of Trigger">

                                                </td>
                                            </tr>
                                        </template>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </lightning-layout-item>-->
                            <!--<c-r-v-_-term-trigger-completed-deals></c-r-v-_-term-trigger-completed-deals>-->
                            <!--Surbhi-Start-PBI-1539864-->
                            <lightning-layout-item>
                                <div class={completedDealCss}>
                                    <template if:true={isConfirmLoading}>
                                        <div class="slds-p-around_x-large">
                                            <lightning-spinner alternative-text="Loading" class="slds-is-fixed"
                                                size="medium" variant="brand"></lightning-spinner>
                                        </div>
                                    </template>
                                    <c-rv_termtriggercompledtedeals onrefreshtermtriggercmp={refreshData}>
                                    </c-rv_termtriggercompledtedeals>
                                </div>
                                <!--Surbhi-End-PBI-1539864-->
                                <!--<lightning-layout-item padding="around-small" size="12">
                            <div class="slds-float_right slds-p-around_small">
                                <lightning-button variant="brand" label="Confirm" title="Confirm" onclick={saveTriggerDeal}>
                                </lightning-button>
                            </div>
                        </lightning-layout-item>-->
                            <!--Surbhi-Start-PBI-1539864-->
                            </lightning-layout-item>
                            <!--/lightning-layout-->


                            <!--/lightning-accordion-section-->
                            <!--Surbhi-End-PBI-1539864-->
						</template>

                    </div>
					<!--Surbhi-Start-PBI-1539864-->
                    <!--/lightning-accordion-->
					<!--Surbhi-End-PBI-1539864-->
                </div>
                <!--</template>-->
            </lightning-tab>


        </lightning-tabset>
    </div>
    <!--</template>-->
</template>